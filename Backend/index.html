<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAKE HUB Bakery | College Project</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
    <!-- Add Toastify CDN in <head> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        /* Custom styles to complement Tailwind */
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
        }

        .cake-card {
            transition: transform 0.3s ease;
        }

        .cake-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .modal {
            transition: opacity 0.3s ease;
        }

        /* Smooth transition for tab switching */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Custom loader */
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Print styles for PDF export */
        @media print {
            .no-print {
                display: none !important;
            }

            body {
                width: 100%;
                height: auto;
            }

            .page-section {
                display: block;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }

            html,
            body {
                background-color: white;
            }
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-md fixed w-full z-10 top-0 no-print">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-pink-600" onclick="showPage('home')">CAKE HUB</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#" class="text-gray-700 hover:text-pink-500" onclick="showPage('home')">Home</a>
                <a href="#" class="text-gray-700 hover:text-pink-500" onclick="showPage('catalog')">Our Cakes</a>
                <a href="#" class="text-gray-700 hover:text-pink-500" onclick="showPage('about')">About Us</a>
                <a href="#" class="text-gray-700 hover:text-pink-500" onclick="showPage('contact')">Contact</a>
            </div>
            <div class="flex items-center space-x-4">
                <a href="#" class="text-gray-700 hover:text-pink-500" onclick="showPage('cart')">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="cart-count" class="bg-pink-500 text-white rounded-full px-2 py-1 text-xs">0</span>
                </a>
                <a href="#" id="user-account-link" class="text-gray-700 hover:text-pink-500"
                    onclick="showPage('login')">
                    <i class="fas fa-user"></i>
                </a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-500 focus:outline-none">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" onclick="showPage('home')">Home</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" onclick="showPage('catalog')">Our Cakes</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" onclick="showPage('about')">About Us</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" onclick="showPage('contact')">Contact</a>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="bg-pink-100 bg-opacity-50">
        <div class="container mx-auto px-6 pt-24 pb-12">
            <!-- Home Page -->
            <section id="home" class="page-section active">
                <!-- Hero Section -->
                <div class="bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-8 mb-12 border-2 border-pink-500">
                    <div class="flex flex-col md:flex-row items-center justify-between w-full">
                        <!-- Text Section -->
                        <div class="md:w-1/2 mb-8 md:mb-0">
                            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">Delicious Handcrafted Cakes
                            </h1>
                            <p class="text-gray-600 mb-6">Made with love, for every occasion. Customize your cake with
                                our wide variety of flavors and designs.</p>
                            <button onclick="showPage('catalog')"
                                class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                                Explore Our Cakes
                            </button>
                        </div>

                        <!-- Image Section -->
                        <div class="md:w-1/2 flex justify-center">
                            <div
                                class="w-full max-w-md h-64 md:h-96 bg-pink-100 rounded-lg overflow-hidden flex items-center justify-center">
                                <img src="https://images.pexels.com/photos/2144200/pexels-photo-2144200.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                                    alt="Cake" class="object-cover w-full h-full" />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Featured Cakes -->
                <div class="mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Featured Cakes</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Featured items will be loaded here by JavaScript -->
                    </div>
                </div>

                <!-- Testimonials -->
                <div class="mb-12 bg-white rounded-xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">What Our Customers Say</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex items-center mb-4">
                                <div class="h-12 w-12 rounded-full bg-pink-100 flex items-center justify-center">
                                    <i class="fas fa-user text-pink-500"></i>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold text-gray-800">Raj</h4>
                                    <div class="text-yellow-400">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600">"The birthday cake for my daughter was absolutely stunning! Not
                                only
                                did it look amazing, but it tasted delicious too. Will definitely order again."</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex items-center mb-4">
                                <div class="h-12 w-12 rounded-full bg-pink-100 flex items-center justify-center">
                                    <i class="fas fa-user text-pink-500"></i>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold text-gray-800">Harman</h4>
                                    <div class="text-yellow-400">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600">"I ordered a custom wedding cake and it exceeded all our
                                expectations.
                                Our guests couldn't stop talking about how delicious it was!"</p>
                        </div>
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex items-center mb-4">
                                <div class="h-12 w-12 rounded-full bg-pink-100 flex items-center justify-center">
                                    <i class="fas fa-user text-pink-500"></i>
                                </div>
                                <div class="ml-4">
                                    <h4 class="font-bold text-gray-800">Anchal</h4>
                                    <div class="text-yellow-400">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600">"The cupcakes I ordered for our office party were a huge hit!
                                Fresh,
                                moist, and the perfect amount of sweetness. Everyone loved them!"</p>
                        </div>
                    </div>
                </div>

                <!-- Services Section -->
                <div class="mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Our Services</h2>
                    <div class="flex flex-col md:flex-row gap-10 items-center flex-grow w-full justify-center">
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div
                                class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-birthday-cake text-2xl text-pink-500"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Custom Cakes</h3>
                            <p class="text-gray-600">Design your perfect cake for any occasion with our custom cake
                                service.
                            </p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div
                                class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-utensils text-2xl text-pink-500"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Events & Catering</h3>
                            <p class="text-gray-600">We provide dessert catering for weddings, corporate events, and
                                parties.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cake Catalog -->
            <section id="catalog" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Our Cake Collection</h1>

                <!-- Filters -->
                <div class="mb-8 bg-white p-6 rounded-lg shadow-sm">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Filter Cakes</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Category</label>
                            <select id="category-filter" class="w-full p-2 border border-gray-300 rounded">
                                <option value="all">All Categories</option>
                                <option value="cakes">Cakes</option>
                                <option value="donuts">Donuts</option>
                                <option value="cupcakes">Cupcakes</option>
                                <option value="pastries">Pastries</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Flavor</label>
                            <select id="flavor-filter" class="w-full p-2 border border-gray-300 rounded">
                                <option value="all">All Flavors</option>
                                <option value="chocolate">Chocolate</option>
                                <option value="vanilla">Vanilla</option>
                                <option value="strawberry">Strawberry</option>
                                <option value="red-velvet">Red Velvet</option>
                                <option value="cheesecake">Cheesecake</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Price Range</label>
                            <select id="price-filter" class="w-full p-2 border border-gray-300 rounded">
                                <option value="all">All Prices</option>
                                <option value="0-200">₹0 - ₹200</option>
                                <option value="200-500">₹200 - ₹500</option>
                                <option value="500-1000">₹500 - ₹1000</option>
                                <option value="1000+">₹1000+</option>
                            </select>
                        </div>
                        <div class="flex items-end">
                            <button id="apply-filters"
                                class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded w-full">
                                Apply Filters
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Cakes Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="cakes-grid">
                    <!-- Cakes will be loaded here by JavaScript -->
                    <div class="loader"></div>
                </div>
            </section>


            <!-- About Us -->
            <section id="about" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">About CAKE HUB</h1>

                <div class="bg-white rounded-lg shadow-sm p-8 mb-8">
                    <div class="flex flex-col md:flex-row">
                        <div class="md:w-1/2 md:pr-8 mb-6 md:mb-0">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">Our Story</h2>
                            <p class="text-gray-600 mb-4">
                                CAKE HUB Bakery was founded in 2015 by a passionate pastry chef with a dream of
                                creating delicious, handcrafted cakes for every special occasion.
                            </p>
                            <p class="text-gray-600 mb-4">
                                What started as a small home bakery has now grown into a beloved local business, serving
                                hundreds of happy customers each month. We put love and care into every cake we create,
                                using only the finest ingredients and time-tested recipes.
                            </p>
                            <p class="text-gray-600">
                                Our mission is simple: to sweeten life's special moments with cakes that not only look
                                stunning but taste amazing too.
                            </p>
                        </div>
                        <div class="md:w-1/2 flex justify-center">
                            <div
                                class="w-full max-w-md h-64 md:h-96 bg-pink-100 rounded-lg overflow-hidden flex items-center justify-center">
                                <img src="https://www.franciscosegarra.com/wp-content/uploads/2024/01/pastry-shop-decoration.jpg"
                                    alt="Cake" class="object-cover w-full h-full" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Our Values</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="flex">
                            <div class="mr-4">
                                <div class="bg-pink-100 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-heart text-pink-500"></i>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">Passion</h3>
                                <p class="text-gray-600">We pour our heart and soul into every cake we make, treating
                                    each
                                    one as a masterpiece.</p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="mr-4">
                                <div class="bg-pink-100 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-leaf text-pink-500"></i>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">Quality</h3>
                                <p class="text-gray-600">We use only premium, fresh ingredients to ensure our cakes
                                    taste as
                                    good as they look.</p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="mr-4">
                                <div class="bg-pink-100 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-paint-brush text-pink-500"></i>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">Creativity</h3>
                                <p class="text-gray-600">We love bringing unique cake designs to life, turning your
                                    vision
                                    into reality.</p>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="mr-4">
                                <div class="bg-pink-100 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-smile text-pink-500"></i>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 mb-2">Customer Satisfaction</h3>
                                <p class="text-gray-600">Your happiness is our priority, and we go above and beyond to
                                    exceed your expectations.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact Page -->
            <section id="contact" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Contact Us</h1>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow-sm p-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Send Us a Message</h2>
                        <form id="contact-form" class="space-y-4">
                            <div>
                                <label class="block text-gray-700 mb-2">Your Name</label>
                                <input type="text" class="w-full p-2 border border-gray-300 rounded" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Email Address</label>
                                <input type="email" class="w-full p-2 border border-gray-300 rounded" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Phone Number</label>
                                <input type="tel" class="w-full p-2 border border-gray-300 rounded">
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Subject</label>
                                <select class="w-full p-2 border border-gray-300 rounded" required>
                                    <option value="">Select a subject</option>
                                    <option value="order">Order Inquiry</option>
                                    <option value="custom">Custom Cake Request</option>
                                    <option value="feedback">Feedback</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2">Your Message</label>
                                <textarea rows="5" class="w-full p-2 border border-gray-300 rounded"
                                    required></textarea>
                            </div>
                            <button type="submit"
                                class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                Send Message
                            </button>
                        </form>
                    </div>

                    <div>
                        <div class="bg-white rounded-lg shadow-sm p-8 mb-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">Visit Our Bakery</h2>
                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="mr-3 mt-1">
                                        <i class="fas fa-map-marker-alt text-pink-500"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Address</h3>
                                        <p class="text-gray-600">123 Cake Street, Sweet City, SC 12345</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="mr-3 mt-1">
                                        <i class="fas fa-phone-alt text-pink-500"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Phone</h3>
                                        <p class="text-gray-600">(555) 123-4567</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="mr-3 mt-1">
                                        <i class="fas fa-envelope text-pink-500"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Email</h3>
                                        <p class="text-gray-600">info@cakehub.com</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="mr-3 mt-1">
                                        <i class="fas fa-clock text-pink-500"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Business Hours</h3>
                                        <p class="text-gray-600">Monday - Friday: 9am - 6pm</p>
                                        <p class="text-gray-600">Saturday: 10am - 4pm</p>
                                        <p class="text-gray-600">Sunday: Closed</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm p-8">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">Follow Us</h2>
                            <div class="flex space-x-4">
                                <a href="#"
                                    class="bg-pink-100 hover:bg-pink-200 text-pink-500 h-12 w-12 rounded-full flex items-center justify-center transition duration-300">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#"
                                    class="bg-pink-100 hover:bg-pink-200 text-pink-500 h-12 w-12 rounded-full flex items-center justify-center transition duration-300">
                                    <i class="fab fa-instagram"></i>
                                </a>
                                <a href="#"
                                    class="bg-pink-100 hover:bg-pink-200 text-pink-500 h-12 w-12 rounded-full flex items-center justify-center transition duration-300">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#"
                                    class="bg-pink-100 hover:bg-pink-200 text-pink-500 h-12 w-12 rounded-full flex items-center justify-center transition duration-300">
                                    <i class="fab fa-pinterest"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Login/Register Page -->
            <section id="login" class="page-section">
                <div class="max-w-2xl mx-auto">
                    <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Account Access</h1>

                    <div class="bg-white rounded-lg shadow-sm p-8">
                        <!-- Tabs -->
                        <div class="flex border-b border-gray-200 mb-6">
                            <button id="login-tab"
                                class="px-4 py-2 font-medium text-sm leading-5 rounded-t-lg focus:outline-none mr-2 bg-pink-100 text-pink-600 border-b-2 border-pink-500">
                                Login
                            </button>
                            <button id="register-tab"
                                class="px-4 py-2 font-medium text-sm leading-5 rounded-t-lg focus:outline-none text-gray-500 hover:text-gray-700">
                                Register
                            </button>
                        </div>

                        <!-- Login Form -->
                        <div id="login-content" class="tab-content active">
                            <form onsubmit="handleLogin()" id="login-form" class="space-y-4">
                                <div>
                                    <label class="block text-gray-700 mb-2">Email Address</label>
                                    <input type="email" id="login-email"
                                        class="w-full p-2 border border-gray-300 rounded" required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Password</label>
                                    <input type="password" id="login-password"
                                        class="w-full p-2 border border-gray-300 rounded" required>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <input type="checkbox" class="h-4 w-4 text-pink-500">
                                        <label class="ml-2 text-sm text-gray-600">Remember me</label>
                                    </div>
                                    <a href="#" class="text-sm text-pink-500 hover:text-pink-600">Forgot password?</a>
                                </div>
                                <button type="button" onclick="handleLogin()"
                                    class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                    Sign In
                                </button>
                            </form>
                        </div>

                        <!-- Register Form -->
                        <div id="register-content" class="tab-content">
                            <form onsubmit="handleSignup()" id="register-form" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-gray-700 mb-2">First Name</label>
                                        <input type="text" name="firstName"
                                            class="w-full p-2 border border-gray-300 rounded" required>
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-2">Last Name</label>
                                        <input type="text" name="lastName"
                                            class="w-full p-2 border border-gray-300 rounded" required>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Email Address</label>
                                    <input type="email" name="email" class="w-full p-2 border border-gray-300 rounded"
                                        required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Phone Number</label>
                                    <input type="tel" name="phone" class="w-full p-2 border border-gray-300 rounded">
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Password</label>
                                    <input type="password" name="password"
                                        class="w-full p-2 border border-gray-300 rounded" required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Confirm Password</label>
                                    <input type="password" name="confirmPassword"
                                        class="w-full p-2 border border-gray-300 rounded" required>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" class="h-4 w-4 text-pink-500" required>
                                    <label class="ml-2 text-sm text-gray-600">I agree to the Terms of Service and
                                        Privacy Policy</label>
                                </div>
                                <button type="submit"
                                    class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                    Create Account
                                </button>
                            </form>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Shopping Cart Page -->
            <section id="cart" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Your Shopping Cart</h1>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                            <div id="cart-items">
                                <!-- Cart items will be loaded here by JavaScript -->
                                <div class="text-center py-8 text-gray-500" id="empty-cart-message">
                                    <i class="fas fa-shopping-cart text-4xl mb-4"></i>
                                    <p>Your cart is empty</p>
                                    <button onclick="showPage('catalog')"
                                        class="mt-4 bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                        Shop Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="bg-white rounded-lg shadow-sm p-6 sticky top-24">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Order Summary</h2>
                            <div class="space-y-3 mb-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Subtotal</span>
                                    <span class="font-medium" id="cart-subtotal">₹0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Shipping</span>
                                    <span class="font-medium" id="cart-shipping">₹0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Tax</span>
                                    <span class="font-medium" id="cart-tax">₹0.00</span>
                                </div>
                                <div class="border-t pt-3 flex justify-between">
                                    <span class="font-bold">Total</span>
                                    <span class="font-bold text-xl" id="cart-total">₹0.00</span>
                                </div>
                            </div>
                            <button onclick="proceedToCheckout()"
                                class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-4 rounded transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                                id="checkout-button" disabled>
                                Proceed to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Checkout Page -->
            <section id="checkout" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Checkout</h1>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Shipping Information</h2>
                            <form id="shipping-form" class="space-y-4">
                                <div>
                                    <label class="block text-gray-700 mb-2">Address</label>
                                    <input id="customer-address" name="address" type="text"
                                        class="w-full p-2 border border-gray-300 rounded" required>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-gray-700 mb-2">City</label>
                                        <input id="customer-city" name="city" type="text"
                                            class="w-full p-2 border border-gray-300 rounded" required>
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-2">State</label>
                                        <input id="customer-state" name="state" type="text"
                                            class="w-full p-2 border border-gray-300 rounded" required>
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-2">ZIP Code</label>
                                        <input id="customer-zip-code" name="zipCode" type="text"
                                            class="w-full p-2 border border-gray-300 rounded" required>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Delivery Instructions (Optional)</label>
                                    <textarea id="customer-delivery-instructions" name="deliveryInstructions" rows="2"
                                        class="w-full p-2 border border-gray-300 rounded"></textarea>
                                </div>
                            </form>

                        </div>
                    </div>

                    <div>
                        <div class="bg-white rounded-lg shadow-sm p-6 sticky top-24">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Order Summary</h2>
                            <div id="checkout-items" class="mb-4">
                                <!-- Checkout items will be loaded here by JavaScript -->
                            </div>
                            <div class="space-y-3 mb-4">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Subtotal</span>
                                    <span class="font-medium" id="checkout-subtotal">₹0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Shipping</span>
                                    <span class="font-medium" id="checkout-shipping">₹0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Tax</span>
                                    <span class="font-medium" id="checkout-tax">₹0.00</span>
                                </div>
                                <div class="border-t pt-3 flex justify-between">
                                    <span class="font-bold">Total</span>
                                    <span class="font-bold text-xl" id="checkout-total">₹0.00</span>
                                </div>
                            </div>
                            <button onclick="placeOrder()"
                                class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-4 rounded transition duration-300">
                                Place Order
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Order Confirmation Page -->
            <section id="order-confirmation" class="page-section">
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-lg shadow-sm p-8 text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-2xl text-green-500"></i>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Order Confirmed!</h1>
                        <p class="text-gray-600 mb-6">Thank you for your order. We've received your order and will begin
                            processing it right away.</p>

                        <div class="bg-gray-50 p-6 rounded-lg mb-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">Order #<span id="order-number">12345</span>
                            </h2>
                            <div class="space-y-3 text-left">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Order Date:</span>
                                    <span class="font-medium" id="order-date">June 15, 2023</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Estimated Delivery:</span>
                                    <span class="font-medium" id="order-delivery">June 18, 2023</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Shipping Address:</span>
                                    <span class="font-medium text-right" id="order-address">123 Main St, Anytown, CA
                                        12345</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Payment Method:</span>
                                    <span class="font-medium" id="order-payment">Credit Card (****1234)</span>
                                </div>
                                <div class="border-t pt-3 flex justify-between">
                                    <span class="font-bold">Total:</span>
                                    <span class="font-bold" id="order-total">₹0.00</span>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                            <button onclick="showPage('home')"
                                class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                Return to Home
                            </button>
                            <button onclick="trackOrder()"
                                class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded transition duration-300">
                                Track Order
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Admin Dashboard -->
            <section id="admin" class="page-section">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Admin Dashboard</h1>

                <!-- Add this just after the admin dashboard heading -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Total Users</h3>
                        <p class="text-3xl font-bold text-pink-600" id="total-users">0</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Total Orders</h3>
                        <p class="text-3xl font-bold text-pink-600" id="total-orders">0</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-2">Total Revenue</h3>
                        <p class="text-3xl font-bold text-pink-600" id="total-revenue">₹0.00</p>
                    </div>
                </div>

                <!-- Orders Tab Content -->
                <div id="admin-orders-content" class="admin-tab-content active">
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold text-gray-800">Recent Orders</h2>
                            <div class="flex space-x-2">
                                <input type="text" placeholder="Search orders..."
                                    class="p-2 border border-gray-300 rounded">
                                <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Order ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Customer</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Date</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Total</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="orders-table-body">
                                    <!-- Orders will be loaded here dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Customers Tab Content -->
                <div id="admin-customers-content" class="admin-tab-content">
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-xl font-bold text-gray-800">Registered Users</h2>
                            <div class="flex space-x-2">
                                <input type="text" 
                                    id="user-search" 
                                    placeholder="Search users..." 
                                    class="p-2 border border-gray-300 rounded">
                                <button onclick="searchUsers()" 
                                    class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Name
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Email
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Phone
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Orders
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Total Spent
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- Users will be loaded here dynamically -->
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-4 flex justify-between items-center">
                            <div class="text-sm text-gray-500">
                                Total Users: <span id="total-users-count">0</span>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="exportUsersList()" 
                                    class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    <i class="fas fa-download mr-2"></i>Export
                                </button>
                                <button onclick="loadAllUsers()" 
                                    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    <i class="fas fa-sync-alt mr-2"></i>Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cake Details Modal -->
            <div id="cake-modal"
                class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
                <div class="bg-white rounded-lg w-11/12 max-w-4xl max-h-90vh overflow-y-auto">
                    <div class="relative">
                        <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                        <div class="p-6" id="cake-modal-content">
                            <!-- Cake details will be loaded here by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 no-print">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">CAKE HUB</h3>
                    <p class="text-gray-400">Handcrafted cakes for every occasion. Made with love and the finest
                        ingredients.</p>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white" onclick="showPage('home')">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" onclick="showPage('catalog')">Our
                                Cakes</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white" onclick="showPage('about')">About Us</a>
                        </li>
                        <li><a href="#" class="text-gray-400 hover:text-white" onclick="showPage('contact')">Contact</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Contact Info</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><i class="fas fa-map-marker-alt mr-2"></i> 123 Cake Street, Sweet City</li>
                        <li><i class="fas fa-phone-alt mr-2"></i> (555) 123-4567</li>
                        <li><i class="fas fa-envelope mr-2"></i> info@cakehub.com</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold mb-4">Follow Us</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-pinterest"></i></a>
                    </div>
                    <div class="mt-4">
                        <h4 class="text-sm font-bold mb-2">Subscribe to our newsletter</h4>
                        <div class="flex">
                            <input type="email" placeholder="Your email" class="p-2 rounded-l w-full text-gray-800">
                            <button class="bg-pink-500 hover:bg-pink-600 text-white p-2 rounded-r">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2023 CAKE HUB Bakery. All rights reserved. College Project.</p>
            </div>
        </div>
    </footer>

    <!-- Add this modal HTML just before the closing body tag -->
    <div id="user-details-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg w-11/12 max-w-2xl">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">User Details</h2>
                    <button onclick="closeUserModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="user-details-content">
                    <!-- User details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Sample data for cakes
        const cakesData = [
            {
                id: 1,
                name: "Chocolate Dream Cake",
                price: 500,
                category: "cakes",
                flavor: "chocolate",
                description: "Three layers of moist chocolate cake filled with chocolate ganache and covered with chocolate buttercream frosting.",
                ingredients: ["Flour", "Sugar", "Cocoa Powder", "Butter", "Eggs", "Milk", "Vanilla Extract"],
                featured: true,
                stock: 15,
                image: "https://images.unsplash.com/photo-1694974907073-ddaf7e15849f?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 2,
                name: "Strawberry Delight",
                price: 380,
                category: "cupcakes",
                flavor: "strawberry",
                description: "Light vanilla sponge cake layered with fresh strawberries and whipped cream, topped with strawberry glaze.",
                ingredients: ["Flour", "Sugar", "Strawberries", "Whipped Cream", "Eggs", "Butter", "Vanilla Extract"],
                featured: true,
                stock: 8,
                image: "https://images.unsplash.com/photo-1622621746668-59fb299bc4d7?q=80&w=1233&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 3,
                name: "Wedding Elegance",
                price: 999,
                category: "cakes",
                flavor: "vanilla",
                description: "Three-tier white cake with delicate vanilla buttercream frosting and elegant sugar flower decorations.",
                ingredients: ["Flour", "Sugar", "Butter", "Eggs", "Vanilla Extract", "Almond Extract", "Milk"],
                featured: false,
                stock: 3,
                image: "https://images.unsplash.com/photo-1608538242850-dad61fa8b3f2?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 4,
                name: "Red Velvet Supreme",
                price: 459,
                category: "cakes",
                flavor: "red-velvet",
                description: "Luxurious red velvet cake with cream cheese frosting and chocolate shavings.",
                ingredients: ["Flour", "Sugar", "Cocoa Powder", "Buttermilk", "Red Food Coloring", "Cream Cheese", "Butter"],
                featured: true,
                stock: 10,
                image: "https://plus.unsplash.com/premium_photo-1713920189815-876dbdf5f56e?q=80&w=988&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 5,
                name: "Lemon Blueberry Cake",
                price: 399,
                category: "pastries",
                flavor: "vanilla",
                description: "Refreshing lemon cake studded with juicy blueberries and topped with lemon cream cheese frosting.",
                ingredients: ["Flour", "Sugar", "Lemon", "Blueberries", "Cream Cheese", "Butter", "Eggs"],
                featured: false,
                stock: 12,
                image: "https://images.unsplash.com/photo-1696152025765-23e16027bb3a?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 6,
                name: "Custom Birthday Cake",
                price: 550,
                category: "cakes",
                flavor: "chocolate",
                description: "Personalized birthday cake with your choice of flavors, fillings, and decorations.",
                ingredients: ["Custom ingredients based on selection"],
                featured: false,
                stock: 20,
                image: "https://plus.unsplash.com/premium_photo-1741194732561-18644fca7d90?q=80&w=1168&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 7,
                name: "Carrot Cake Delight",
                price: 399,
                category: "pastries",
                flavor: "cheesecake",
                description: "Spiced carrot cake with walnuts, raisins, and classic cream cheese frosting.",
                ingredients: ["Flour", "Sugar", "Carrots", "Walnuts", "Raisins", "Cream Cheese", "Cinnamon"],
                featured: false,
                stock: 9,
                image: "https://plus.unsplash.com/premium_photo-1676914697101-56a0e7f1f1ec?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 8,
                name: "Cheesecake Supreme",
                price: 489,
                category: "cupcakes",
                flavor: "cheesecake",
                description: "Rich, creamy New York-style cheesecake with graham cracker crust and fresh berry topping.",
                ingredients: ["Cream Cheese", "Sugar", "Eggs", "Graham Crackers", "Butter", "Sour Cream", "Vanilla Extract"],
                featured: true,
                stock: 7,
                image: "https://plus.unsplash.com/premium_photo-1722686461601-b2a018a4213b?q=80&w=1255&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 9,
                name: "Classic Vanilla Celebration",
                price: 359,
                category: "cakes",
                flavor: "vanilla",
                description: "Moist vanilla cake with vanilla buttercream frosting, perfect for any celebration.",
                ingredients: ["Flour", "Sugar", "Butter", "Eggs", "Vanilla Bean", "Milk", "Baking Powder"],
                featured: false,
                stock: 15,
                image: "https://images.unsplash.com/photo-1685956801990-57ef97b17d45?q=80&w=1160&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 10,
                name: "Glazed Chocolate Donut",
                price: 150,
                category: "donuts",
                flavor: "chocolate",
                description: "Freshly made donuts with a rich chocolate glaze.",
                ingredients: ["Flour", "Sugar", "Cocoa Powder", "Milk", "Butter", "Eggs", "Chocolate Glaze"],
                featured: false,
                stock: 20,
                image: "https://images.unsplash.com/photo-1693167064408-6a2738932da1?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 11,
                name: "Strawberry Jam Donut",
                price: 120,
                category: "donuts",
                flavor: "strawberry",
                description: "Fluffy donuts filled with sweet strawberry jam and coated in sugar.",
                ingredients: ["Flour", "Sugar", "Strawberries", "Butter", "Eggs", "Vanilla Extract"],
                featured: true,
                stock: 15,
                image: "https://veenaazmanov.com/wp-content/uploads/2018/11/Jelly-Donuts-Doughnut-with-Strawberry-Jelly5.jpg"
            },
            {
                id: 12,
                name: "Chocolate Fudge Cupcake",
                price: 220,
                category: "cupcakes",
                flavor: "chocolate",
                description: "Rich and fudgy chocolate cupcakes topped with chocolate ganache and sprinkles.",
                ingredients: ["Flour", "Sugar", "Cocoa Powder", "Butter", "Eggs", "Milk", "Chocolate Ganache"],
                featured: true,
                stock: 10,
                image: "https://plus.unsplash.com/premium_photo-1664300258641-f21dd7792f35?q=80&w=986&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 13,
                name: "Vanilla Bean Cupcake",
                price: 180,
                category: "cupcakes",
                flavor: "vanilla",
                description: "Fluffy vanilla cupcakes with vanilla buttercream frosting.",
                ingredients: ["Flour", "Sugar", "Vanilla Bean", "Butter", "Eggs", "Milk"],
                featured: false,
                stock: 25,
                image: "https://plus.unsplash.com/premium_photo-1716152294077-0e4ddf41c4bf?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 14,
                name: "Apple Cinnamon Pastry",
                price: 250,
                category: "pastries",
                flavor: "cinnamon",
                description: "Flaky pastry filled with spiced apples and cinnamon, topped with powdered sugar.",
                ingredients: ["Flour", "Sugar", "Apple", "Cinnamon", "Butter", "Eggs"],
                featured: false,
                stock: 18,
                image: "https://images.unsplash.com/photo-1703876087705-818f2af21c65?q=80&w=1162&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 15,
                name: "Chocolate Sprinkle Donut",
                price: 140,
                category: "donuts",
                flavor: "chocolate",
                description: "Soft donut with a rich chocolate glaze and colorful sprinkles on top.",
                ingredients: ["Flour", "Sugar", "Cocoa Powder", "Butter", "Eggs", "Sprinkles", "Chocolate Glaze"],
                featured: true,
                stock: 18,
                image: "https://brokenovenbaking.com/wp-content/uploads/2022/04/chocolate-donuts-with-sprinkles-11.jpg"
            },
            {
                id: 16,
                name: "Vanilla Glazed Donut",
                price: 130,
                category: "donuts",
                flavor: "vanilla",
                description: "Classic donut with smooth vanilla glaze and a fluffy interior.",
                ingredients: ["Flour", "Sugar", "Butter", "Eggs", "Vanilla Extract", "Milk"],
                featured: false,
                stock: 22,
                image: "https://www.errenskitchen.com/wp-content/uploads/2020/01/Baked-Vanilla-Donuts-1-4.jpg"
            },
            {
                id: 17,
                name: "Blueberry Donut",
                price: 160,
                category: "donuts",
                flavor: "blueberry",
                description: "Soft donut filled with blueberry jam and topped with a light glaze.",
                ingredients: ["Flour", "Sugar", "Blueberry Jam", "Butter", "Eggs", "Milk"],
                featured: false,
                stock: 17,
                image: "https://inbloombakery.com/wp-content/uploads/2022/05/Blueberry-Cake-Donuts-12.jpg"
            },
            {
                id: 18,
                name: "Chocolate Pastry",
                price: 270,
                category: "pastries",
                flavor: "chocolate",
                description: "Crispy puff pastry filled with rich chocolate and dusted with cocoa.",
                ingredients: ["Flour", "Sugar", "Butter", "Chocolate", "Eggs", "Cocoa Powder"],
                featured: false,
                stock: 14,
                image: "https://images.unsplash.com/photo-1708175313814-679cb8e90d2e?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
            },
            {
                id: 19,
                name: "Vanilla Cream Pastry",
                price: 260,
                category: "pastries",
                flavor: "vanilla",
                description: "Flaky pastry filled with sweet vanilla cream and topped with powdered sugar.",
                ingredients: ["Flour", "Sugar", "Vanilla Cream", "Butter", "Eggs", "Milk"],
                featured: false,
                stock: 12,
                image: "https://victoriajunction.in/wp-content/uploads/2023/08/Vanilla-Pastry-600x600.jpeg"
            },
            {
                id: 20,
                name: "Strawberry Pastry",
                price: 280,
                category: "pastries",
                flavor: "strawberry",
                description: "Delicate pastry layered with strawberry filling and whipped cream.",
                ingredients: ["Flour", "Sugar", "Strawberries", "Whipped Cream", "Butter", "Eggs"],
                featured: true,
                stock: 10,
                image: "https://abicake.com/cdn/shop/files/Strawberry-Pastries.png?v=1703506485"
            }

        ];

        const BASE_URL = "http://localhost:3000/api";

        async function fetchUserProfile() {
            try {
                const response = await fetch(`${BASE_URL}/auth/profile`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                });

                if (response.ok) {
                    const data = await response.json();
                    localStorage.setItem('user', JSON.stringify(data.user));
                    updateNavbar();
                } else {
                    console.error('Failed to fetch user profile:', response.statusText);
                    localStorage.removeItem('user'); // Clear user data if fetching fails
                }
            } catch (error) {
                console.error('Error fetching user profile:', error);
                localStorage.removeItem('user'); // Clear user data on error
            }
        }

        fetchUserProfile();

        // Toast helper functions (add these at the top of your <script>)
        function toastSuccess(message) {
            Toastify({
                text: message,
                duration: 3000,
                gravity: "bottom",
                position: "right",
                backgroundColor: "#10b981",
                stopOnFocus: true,
            }).showToast();
        }
        function toastError(message) {
            Toastify({
                text: message,
                duration: 3000,
                gravity: "bottom",
                position: "right",
                backgroundColor: "#ef4444",
                stopOnFocus: true,
            }).showToast();
        }

        async function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            if (!email || !password) {
                toastError('Please enter email and password');
                return;
            }

            try {
                const response = await fetch(`${BASE_URL}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password }),
                    credentials: 'include',
                });

                const data = await response.json();

                if (response.ok) {
                    console.log('Login response:', data); // Debug log
                    localStorage.setItem('user', JSON.stringify(data.user));
                    toastSuccess('Login successful!');
                    updateNavbar();
                    showPage('home');
                } else {
                    toastError(data.message || 'Login failed');
                }
            } catch (error) {
                console.error('Error during login:', error);
                toastError('An error occurred. Please try again.');
            }
        }

        async function handleSignup() {
            const form = document.getElementById('register-form');
            const firstName = form.elements['firstName'].value;
            const lastName = form.elements['lastName'].value;
            const email = form.elements['email'].value;
            const phone = form.elements['phone'].value;
            const password = form.elements['password'].value;
            const confirmPassword = form.elements['confirmPassword'].value;

            if (!firstName || !lastName || !email || !password || !confirmPassword) {
                toastError('Please fill in all required fields');
                return;
            }

            if (password !== confirmPassword) {
                toastError('Passwords do not match');
                return;
            }

            try {
                const response = await fetch(`${BASE_URL}/auth/signup`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ firstName, lastName, email, phone, password }),
                    credentials: 'include',
                });

                const data = await response.json();

                if (response.ok) {
                    toastSuccess('Signup successful! Please log in.');
                    localStorage.setItem('user', JSON.stringify(data.user));
                    updateNavbar();
                    showPage('login');
                } else {
                    toastError(data.message || 'Signup failed');
                }
            } catch (error) {
                console.error('Error during signup:', error);
                toastError('An error occurred. Please try again.');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                handleLogin();
            });

            document.getElementById('register-form').addEventListener('submit', (e) => {
                e.preventDefault();
                handleSignup();
            });
        });

        function updateNavbar() {
            const userAccountLink = document.getElementById('user-account-link');
            const user = JSON.parse(localStorage.getItem('user'));

            console.log('Current user data:', user); // Debug log

            if (user && user.firstName) {
                // Check for admin role
                const isAdmin = user.role === 'admin';
                console.log('Is admin?', isAdmin); // Debug log

                // Add admin dashboard link if user is admin
                const adminLink = isAdmin ? `
                    <a href="#" class="text-gray-700 hover:text-pink-500 mr-4" onclick="showPage('admin')">
                        <i class="fas fa-cog"></i>
                        <span class="hidden md:inline">Admin</span>
                    </a>
                ` : '';

                userAccountLink.innerHTML = `
                    ${adminLink}
                    <i class="fas fa-user mr-1"></i>
                    <span class="hidden md:inline">Hi, ${user.firstName}</span>
                    <button id="logout-btn" title="Logout" class="ml-2 bg-gray-200 hover:bg-pink-500 hover:text-white text-gray-700 font-bold py-1 px-3 rounded transition duration-300">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                `;
                userAccountLink.onclick = null;
                setTimeout(() => {
                    const logoutBtn = document.getElementById('logout-btn');
                    if (logoutBtn) logoutBtn.onclick = logoutUser;
                }, 0);
            } else {
                userAccountLink.innerHTML = `<i class="fas fa-user"></i>`;
                userAccountLink.onclick = () => showPage('login');
            }
        }

        async function logoutUser() {
            try {
                await fetch(`${BASE_URL}/auth/logout`, {
                    method: 'POST',
                    credentials: 'include',
                });
            } catch (e) { }
            localStorage.removeItem('user');
            toastSuccess('Logged out successfully!');
            updateNavbar();
            showPage('home');
        }

        // Shopping cart array
        let cart = [];

        // Current user data - simulate login functionality
        let currentUser = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize mobile menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', function () {
                mobileMenu.classList.toggle('hidden');
            });

            // Initialize tabs on login/register page
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const loginContent = document.getElementById('login-content');
            const registerContent = document.getElementById('register-content');

            loginTab.addEventListener('click', function () {
                loginTab.classList.add('bg-pink-100', 'text-pink-600', 'border-b-2', 'border-pink-500');
                loginTab.classList.remove('text-gray-500', 'hover:text-gray-700');
                registerTab.classList.remove('bg-pink-100', 'text-pink-600', 'border-b-2', 'border-pink-500');
                registerTab.classList.add('text-gray-500', 'hover:text-gray-700');

                loginContent.classList.add('active');
                registerContent.classList.remove('active');
            });

            registerTab.addEventListener('click', function () {
                registerTab.classList.add('bg-pink-100', 'text-pink-600', 'border-b-2', 'border-pink-500');
                registerTab.classList.remove('text-gray-500', 'hover:text-gray-700');
                loginTab.classList.remove('bg-pink-100', 'text-pink-600', 'border-b-2', 'border-pink-500');
                loginTab.classList.add('text-gray-500', 'hover:text-gray-700');

                registerContent.classList.add('active');
                loginContent.classList.remove('active');
            });

            // Initialize admin dashboard tabs
            const adminTabs = document.querySelectorAll('.admin-tab');
            const adminContents = document.querySelectorAll('.admin-tab-content');

            adminTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    // Remove active class from all tabs
                    adminTabs.forEach(t => {
                        t.classList.remove('active', 'border-pink-500', 'text-pink-600');
                        t.classList.add('border-transparent', 'text-gray-500');
                    });

                    // Add active class to clicked tab
                    this.classList.add('active', 'border-pink-500', 'text-pink-600');
                    this.classList.remove('border-transparent', 'text-gray-500');

                    // Show corresponding content
                    const contentId = this.id.replace('-tab', '-content');
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(contentId).classList.add('active');

                    // Load users if customers tab is clicked
                    if (this.id === 'admin-customers-tab') {
                        loadAllUsers();
                    }
                });
            });

            // Load featured cakes on homepage
            loadFeaturedCakes();

            // Load all cakes in catalog
            loadAllCakes();

            // Initialize filter button event
            const applyFiltersBtn = document.getElementById('apply-filters');
            if (applyFiltersBtn) {
                applyFiltersBtn.addEventListener('click', filterCakes);
            }

            // Initialize contact form submission
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    toastSuccess('Thank you for your message! We will get back to you soon.');
                    contactForm.reset();
                });
            }

            // Update cart count
            updateCartCount();

            // Add click handler for the customers tab
            const customersTab = document.getElementById('admin-customers-tab');
            if (customersTab) {
                customersTab.addEventListener('click', loadAllUsers);
            }
        });

        // Show page function
        function showPage(pageId) {
            const user = JSON.parse(localStorage.getItem('user'));
            
            // Debug logs
            console.log('Showing page:', pageId);
            console.log('User data:', user);
            
            // Check for admin access
            if (pageId === 'admin') {
                if (!user) {
                    toastError('Please log in to access admin dashboard');
                    showPage('login');
                    return;
                }
                if (user.role !== 'admin') {
                    console.log('User role:', user.role); // Debug log
                    showPage('home');
                    return;
                }
            }

            // Rest of your existing showPage code...
            const pages = document.querySelectorAll('.page-section');
            pages.forEach(page => {
                page.classList.remove('active');
            });

            document.getElementById(pageId).classList.add('active');
            
            // If showing admin dashboard, load users
            if (pageId === 'admin') {
                loadDashboardData();
                loadAllUsers();
            }

            // Close mobile menu if open
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.add('hidden');

            // Scroll to top
            window.scrollTo(0, 0);

            // If showing cart or checkout, update summary
            if (pageId === 'cart') {
                updateCartItems();
                updateCartSummary();
            } else if (pageId === 'checkout') {
                updateCheckoutItems();
                updateCheckoutSummary();
            }
        }

        // Load featured cakes on homepage
        function loadFeaturedCakes() {
            const featuredContainer = document.querySelector('#home .grid');
            if (!featuredContainer) return;

            // Clear container
            featuredContainer.innerHTML = '';

            // Filter for featured cakes
            const featuredCakes = cakesData.filter(cake => cake.featured);

            // Add featured cakes to container
            featuredCakes.forEach(cake => {
                featuredContainer.innerHTML += `
                    <div class="cake-card bg-white rounded-lg shadow-sm overflow-hidden">
                        <div class="h-48 bg-pink-100 flex items-center justify-center overflow-hidden">
                             <img src="${cake.image}" alt="${cake.name}" class="object-cover h-full w-full" />
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">${cake.name}</h3>
                            <p class="text-gray-600 mb-4">${cake.description.substring(0, 100)}...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-pink-500 font-bold">₹${cake.price.toFixed(2)}</span>
                                <button onclick="viewCake(${cake.id})" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Load all cakes in catalog
        function loadAllCakes() {
            const cakesGrid = document.getElementById('cakes-grid');
            if (!cakesGrid) return;

            // Clear container
            cakesGrid.innerHTML = '';

            // Add cakes to grid
            cakesData.forEach(cake => {
                cakesGrid.innerHTML += `
                    <div class="cake-card bg-white rounded-lg shadow-sm overflow-hidden" 
                        data-category="${cake.category}" 
                        data-flavor="${cake.flavor}" 
                        data-price="${cake.price}">
                        <div class="h-48 bg-pink-100 flex items-center justify-center overflow-hidden">
                             <img src="${cake.image}" alt="${cake.name}" class="object-cover h-full w-full" />
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">${cake.name}</h3>
                            <div class="flex space-x-2 mb-2">
                                <span class="bg-pink-100 text-pink-600 text-xs px-2 py-1 rounded">${cake.category}</span>
                                <span class="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded">${cake.flavor}</span>
                            </div>
                            <p class="text-gray-600 mb-4">${cake.description.substring(0, 80)}...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-pink-500 font-bold">₹${cake.price.toFixed(2)}</span>
                                <button onclick="viewCake(${cake.id})" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300">
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Filter cakes based on selected criteria
        function filterCakes() {
            const categoryFilter = document.getElementById('category-filter').value;
            const flavorFilter = document.getElementById('flavor-filter').value;
            const priceFilter = document.getElementById('price-filter').value;

            const allCakes = document.querySelectorAll('#cakes-grid .cake-card');

            allCakes.forEach(cake => {
                const category = cake.getAttribute('data-category');
                const flavor = cake.getAttribute('data-flavor');
                const price = parseFloat(cake.getAttribute('data-price'));

                let showCake = true;

                // Category filter
                if (categoryFilter !== 'all' && category !== categoryFilter) {
                    showCake = false;
                }

                // Flavor filter
                if (flavorFilter !== 'all' && flavor !== flavorFilter) {
                    showCake = false;
                }

                // Price filter (updated for INR)
                if (priceFilter !== 'all') {
                    if (priceFilter === '0-200' && (price < 0 || price > 200)) {
                        showCake = false;
                    } else if (priceFilter === '200-500' && (price < 200 || price > 500)) {
                        showCake = false;
                    } else if (priceFilter === '500-1000' && (price < 500 || price > 1000)) {
                        showCake = false;
                    } else if (priceFilter === '1000+' && price < 1000) {
                        showCake = false;
                    }
                }

                // Show or hide cake
                cake.style.display = showCake ? 'block' : 'none';
            });
        }


        // View cake details
        function viewCake(cakeId) {
            const cake = cakesData.find(c => c.id === cakeId);
            if (!cake) return;

            const modal = document.getElementById('cake-modal');
            const modalContent = document.getElementById('cake-modal-content');

            modalContent.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                       <div class="h-48 bg-pink-100 flex items-center justify-center overflow-hidden">
                             <img src="${cake.image}" alt="${cake.name}" class="object-cover h-full w-full" />
                        </div>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">${cake.name}</h2>
                        <div class="flex space-x-2 mb-4">
                            <span class="bg-pink-100 text-pink-600 text-xs px-2 py-1 rounded">${cake.category}</span>
                            <span class="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded">${cake.flavor}</span>
                        </div>
                        <p class="text-gray-600 mb-4">${cake.description}</p>
                        <div class="mb-4">
                            <h3 class="font-bold text-gray-800 mb-2">Ingredients:</h3>
                            <ul class="list-disc pl-5 text-gray-600">
                                ${cake.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="mb-6">
                            <p class="text-gray-600">Availability: <span class="font-medium ${cake.stock > 0 ? 'text-green-600' : 'text-red-600'}">${cake.stock > 0 ? 'In Stock' : 'Out of Stock'}</span></p>
                            <p class="text-2xl font-bold text-pink-500 mt-2">₹${cake.price.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="flex border border-gray-300 rounded">
                                <button class="px-3 py-1 bg-gray-100" onclick="updateQuantity('decrease')">-</button>
                                <input type="number" min="1" value="1" id="cake-quantity" class="w-12 text-center" readonly>
                                <button class="px-3 py-1 bg-gray-100" onclick="updateQuantity('increase')">+</button>
                            </div>
                            <button onclick="addToCart(${cake.id})" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-6 rounded transition duration-300 flex-grow">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        // Close cake details modal
        function closeModal() {
            const modal = document.getElementById('cake-modal');
            modal.classList.add('hidden');
        }

        // Update quantity in cake modal
        function updateQuantity(action) {
            const quantityInput = document.getElementById('cake-quantity');
            let quantity = parseInt(quantityInput.value);

            if (action === 'increase') {
                quantity++;
            } else if (action === 'decrease' && quantity > 1) {
                quantity--;
            }

            quantityInput.value = quantity;
        }

        // Add cake to cart
        function addToCart(cakeId) {
            const cake = cakesData.find(c => c.id === cakeId);
            if (!cake) return;

            const quantity = parseInt(document.getElementById('cake-quantity').value);

            // Check if cake is already in cart
            const existingItem = cart.find(item => item.id === cakeId);

            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: cake.id,
                    name: cake.name,
                    price: cake.price,
                    quantity: quantity
                });
            }

            // Update cart count
            updateCartCount();

            // Close modal
            closeModal();

            // Show success message
            toastSuccess(`${cake.name} has been added to your cart!`);
        }

        // Update cart count in header
        function updateCartCount() {
            const cartCount = document.getElementById('cart-count');
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);

            cartCount.textContent = totalItems;

            // Enable/disable checkout button
            const checkoutButton = document.getElementById('checkout-button');
            if (checkoutButton) {
                checkoutButton.disabled = totalItems === 0;
            }
        }

        // Update cart items display
        function updateCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const emptyCartMessage = document.getElementById('empty-cart-message');

            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartItemsContainer.innerHTML = '';
                return;
            }

            emptyCartMessage.style.display = 'none';
            cartItemsContainer.innerHTML = '';

            cart.forEach(item => {
                const cake = cakesData.find(c => c.id === item.id);
                cartItemsContainer.innerHTML += `
                    <div class="flex flex-col md:flex-row items-center py-4 border-b" data-item-id="${item.id}">
                <div class="w-full max-w-md h-64 md:h-96 bg-pink-100 rounded-lg overflow-hidden flex items-center justify-center">
                    <img src="${cake.image}" alt="Cake" class="object-cover w-full h-full" />
                </div>
                <div class="flex-grow mb-4 md:mb-0 px-4 md:px-8">
                    <h3 class="font-bold text-gray-800">${item.name}</h3>
                    <p class="text-gray-600 text-sm">${cake.flavor} flavor</p>
                </div>
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <div class="flex border border-gray-300 rounded">
                        <button class="px-2 py-1 bg-gray-100" onclick="updateCartItemQuantity(${item.id}, 'decrease')">-</button>
                        <span class="w-8 text-center py-1">${item.quantity}</span>
                        <button class="px-2 py-1 bg-gray-100" onclick="updateCartItemQuantity(${item.id}, 'increase')">+</button>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="font-bold text-gray-800 w-24 text-right">₹${(item.price * item.quantity).toFixed(2)}</span>
                    <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
                `;
            });
        }

        // Update cart item quantity
        function updateCartItemQuantity(itemId, action) {
            const item = cart.find(item => item.id === itemId);
            if (!item) return;

            if (action === 'increase') {
                item.quantity++;
            } else if (action === 'decrease' && item.quantity > 1) {
                item.quantity--;
            }

            updateCartItems();
            updateCartSummary();
            updateCartCount();
        }

        // Remove item from cart
        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);

            updateCartItems();
            updateCartSummary();
            updateCartCount();
        }

        // Update cart summary
        function updateCartSummary() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shipping = subtotal > 0 ? 10 : 0; // $10 shipping fee, free over $100
            const tax = subtotal * 0.08; // 8% tax
            const total = subtotal + shipping + tax;

            document.getElementById('cart-subtotal').textContent = `₹${subtotal.toFixed(2)}`;
            document.getElementById('cart-shipping').textContent = `₹${shipping.toFixed(2)}`;
            document.getElementById('cart-tax').textContent = `₹${tax.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `₹${total.toFixed(2)}`;
        }

        // Proceed to checkout
        function proceedToCheckout() {
            showPage('checkout');
            updateCheckoutItems();
            updateCheckoutSummary();
        }

        // Update checkout items display
        function updateCheckoutItems() {
            const checkoutItemsContainer = document.getElementById('checkout-items');

            checkoutItemsContainer.innerHTML = '';

            cart.forEach(item => {
                checkoutItemsContainer.innerHTML += `
                    <div class="flex justify-between items-center py-2 border-b">
                        <span class="text-gray-700">${item.name} x ${item.quantity}</span>
                        <span class="font-medium">₹${(item.price * item.quantity).toFixed(2)}</span>
                    </div>
                `;
            });
        }

        // Update checkout summary
        function updateCheckoutSummary() {
            const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            const shipping = subtotal > 0 ? 10 : 0; // $10 shipping fee, free over $100
            const tax = subtotal * 0.08; // 8% tax
            const total = subtotal + shipping + tax;

            document.getElementById('checkout-subtotal').textContent = `₹${subtotal.toFixed(2)}`;
            document.getElementById('checkout-shipping').textContent = `₹${shipping.toFixed(2)}`;
            document.getElementById('checkout-tax').textContent = `₹${tax.toFixed(2)}`;
            document.getElementById('checkout-total').textContent = `₹${total.toFixed(2)}`;

            // Also update the order confirmation page
            document.getElementById('order-total').textContent = `₹${total.toFixed(2)}`;
        }

        // Track order (placeholder)
        function trackOrder() {
            toastSuccess('Order tracking feature would be implemented in a real backend. This is a simulation.');
        }
        // Handle login

        async function placeOrder() {

            const userData = localStorage.getItem("user") || localStorage.getItem("token");
            if (!userData) {
                toastError("Please log in first to place an order.");
                return;
            }

            const user = JSON.parse(userData);

            // Collect customer details
            const customer = {
                firstName: user.firstName,
                lastName: user.lastName,
                email: user.email,
                phone: user.phone,
                address: document.getElementById('customer-address').value,
                city: document.getElementById('customer-city').value,
                state: document.getElementById('customer-state').value,
                zipCode: document.getElementById('customer-zip-code').value,
                deliveryInstructions: document.getElementById('customer-delivery-instructions').value || '',
            };

            const items = cart.map(item => ({
                name: item.name,
                quantity: item.quantity,
                price: item.price,
            }));

            const subtotal = cart.reduce((total, item) => total + item.price * item.quantity, 0);
            const shipping = subtotal > 1000 ? 0 : 50;
            const tax = subtotal * 0.08;
            const total = subtotal + shipping + tax;

            const summary = {
                subtotal,
                shipping,
                tax,
                total,
            };

            const orderData = {
                customer,
                items,
                summary,
            };

            try {
                const response = await fetch(`${BASE_URL}/orders`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData),
                });

                const data = await response.json();

                if (response.ok) {
                    toastSuccess('Order placed successfully!');
                    cart = [];
                    updateCartCount();
                    showPage('home');
                } else {
                    toastError(data.message || 'Failed to place order. Please try again.');
                }
            } catch (error) {
                console.error('Error placing order:', error);
                toastError('An error occurred while placing the order. Please try again.');
            }
        }

        // First, add this function to your JavaScript section:

        async function loadAllUsers() {
            const customersTableBody = document.querySelector('#admin-customers-content tbody');
            
            // Show loading state
            customersTableBody.innerHTML = `
                <tr>
                    <td colspan="6" class="text-center py-4">
                        <div class="loader"></div>
                        <p class="mt-2 text-gray-600">Loading users...</p>
                    </td>
                </tr>
            `;

            try {
                const response = await fetch(`${BASE_URL}/auth/users`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                });

                if (response.ok) {
                    const users = await response.json();
                    
                    if (users.length === 0) {
                        customersTableBody.innerHTML = `
                            <tr>
                                <td colspan="6" class="text-center py-4 text-gray-600">
                                    No users found
                                </td>
                            </tr>
                        `;
                        return;
                    }

                    customersTableBody.innerHTML = users.map(user => `
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap">${user.firstName} ${user.lastName}</td>
                            <td class="px-6 py-4 whitespace-nowrap">${user.email}</td>
                            <td class="px-6 py-4 whitespace-nowrap">${user.phone || 'N/A'}</td>
                            <td class="px-6 py-4 whitespace-nowrap">${user.orders?.length || 0}</td>
                            <td class="px-6 py-4 whitespace-nowrap">₹${user.totalSpent || 0}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="viewUserDetails('${user._id}')" 
                                    class="text-indigo-600 hover:text-indigo-900 mr-3">
                                    View
                                </button>
                                <button onclick="deleteUser('${user._id}')" 
                                    class="text-red-600 hover:text-red-900">
                                    Delete
                                </button>
                            </td>
                        </tr>
                    `).join('');

                    // Update total users count
                    document.getElementById('total-users-count').textContent = users.length;
                    document.getElementById('total-users').textContent = users.length;
                } else {
                    const error = await response.json();
                    toastError(error.message || 'Failed to load users');
                    customersTableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center py-4 text-red-600">
                                Failed to load users. Please try again.
                            </td>
                        </tr>
                    `;
                }
            } catch (error) {
                console.error('Error loading users:', error);
                toastError('Error loading users');
                customersTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-4 text-red-600">
                            Error loading users. Please try again.
                        </td>
                    </tr>
                `;
            }
        }

        // Add these helper functions for user management
        async function viewUserDetails(userId) {
            try {
                const response = await fetch(`${BASE_URL}/auth/users/${userId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                });

                if (response.ok) {
                    const user = await response.json();
                    const modal = document.getElementById('user-details-modal');
                    const content = document.getElementById('user-details-content');

                    content.innerHTML = `
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 font-bold mb-2">First Name</label>
                                    <p class="text-gray-600">${user.firstName}</p>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-bold mb-2">Last Name</label>
                                    <p class="text-gray-600">${user.lastName}</p>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Email</label>
                                <p class="text-gray-600">${user.email}</p>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Phone</label>
                                <p class="text-gray-600">${user.phone || 'N/A'}</p>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Role</label>
                                <select id="user-role" class="w-full p-2 border border-gray-300 rounded" 
                                    onchange="updateUserRole('${user._id}', this.value)">
                                    <option value="user" ${user.role === 'user' ? 'selected' : ''}>User</option>
                                    <option value="admin" ${user.role === 'admin' ? 'selected' : ''}>Admin</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Total Orders</label>
                                <p class="text-gray-600">${user.orders?.length || 0}</p>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Total Spent</label>
                                <p class="text-gray-600">₹${user.totalSpent || 0}</p>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-bold mb-2">Member Since</label>
                                <p class="text-gray-600">${new Date(user.createdAt).toLocaleDateString()}</p>
                            </div>
                        </div>
                    `;

                    modal.classList.remove('hidden');
                } else {
                    toastError('Failed to load user details');
                }
            } catch (error) {
                console.error('Error loading user details:', error);
                toastError('Error loading user details');
            }
        }

        function closeUserModal() {
            document.getElementById('user-details-modal').classList.add('hidden');
        }

        async function updateUserRole(userId, newRole) {
            try {
                const response = await fetch(`${BASE_URL}/auth/users/${userId}/role`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                    body: JSON.stringify({ role: newRole }),
                });

                if (response.ok) {
                    toastSuccess('User role updated successfully');
                    loadAllUsers(); // Refresh the users list
                } else {
                    toastError('Failed to update user role');
                }
            } catch (error) {
                console.error('Error updating user role:', error);
                toastError('Error updating user role');
            }
        }

        async function deleteUser(userId) {
            if (!confirm('Are you sure you want to delete this user?')) return;

            try {
                const response = await fetch(`${BASE_URL}/auth/users/${userId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                });

                if (response.ok) {
                    toastSuccess('User deleted successfully');
                    loadAllUsers(); // Reload the users list
                } else {
                    toastError('Failed to delete user');
                }
            } catch (error) {
                console.error('Error deleting user:', error);
                toastError('Error deleting user');
            }
        }

        // Add this to your existing initialization code (in the DOMContentLoaded event)
        document.addEventListener('DOMContentLoaded', function() {
            // ... existing code ...

            // Add click handler for the customers tab
            const customersTab = document.getElementById('admin-customers-tab');
            if (customersTab) {
                customersTab.addEventListener('click', loadAllUsers);
            }
        });

        // Add this function to handle user search
        function searchUsers() {
            const searchTerm = document.getElementById('user-search').value.toLowerCase();
            const rows = document.querySelectorAll('#admin-customers-content tbody tr');

            rows.forEach(row => {
                const name = row.querySelector('td:first-child').textContent.toLowerCase();
                const email = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
                const phone = row.querySelector('td:nth-child(3)').textContent.toLowerCase();

                if (name.includes(searchTerm) || email.includes(searchTerm) || phone.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Add event listener for search input
        document.getElementById('user-search').addEventListener('keyup', searchUsers);

        function exportUsersList() {
            const rows = document.querySelectorAll('#admin-customers-content tbody tr');
            let csv = 'Name,Email,Phone,Orders,Total Spent\n';
            
            rows.forEach(row => {
                const name = row.querySelector('td:nth-child(1)').textContent;
                const email = row.querySelector('td:nth-child(2)').textContent;
                const phone = row.querySelector('td:nth-child(3)').textContent;
                const orders = row.querySelector('td:nth-child(4)').textContent;
                const totalSpent = row.querySelector('td:nth-child(5)').textContent;
                
                csv += `${name},${email},${phone},${orders},${totalSpent}\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'users.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function isUserAdmin() {
            const user = JSON.parse(localStorage.getItem('user'));
            console.log('Checking admin status:', user); // Debug log
            return user && user.role === 'admin';
        }

        // Function to load dashboard data
        async function loadDashboardData() {
            try {
                // Fetch recent orders
                const ordersResponse = await fetch(`${BASE_URL}/orders/recent`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });

                if (!ordersResponse.ok) {
                    throw new Error('Failed to load dashboard data');
                }

                const ordersData = await ordersResponse.json();
                console.log('Orders response:', ordersData); // Debug log

                if (!ordersData.success) {
                    throw new Error(ordersData.message || 'Failed to fetch orders');
                }

                // Calculate totals from the orders data
                const totalOrders = ordersData.orders.length;
                const totalRevenue = ordersData.orders.reduce((sum, order) => 
                    sum + (order.summary?.total || 0), 0);

                // Get total users from localStorage
                let totalUsers = 0;
                try {
                    // Get users from localStorage
                    const usersData = localStorage.getItem('users');
                    if (usersData) {
                        const users = JSON.parse(usersData);
                        if (Array.isArray(users)) {
                            totalUsers = users.length;
                            console.log('Users from localStorage:', users); // Debug log
                        }
                    }
                    
                    // If no users found, try to get from userData
                    if (totalUsers === 0) {
                        const userData = localStorage.getItem('userData');
                        if (userData) {
                            const user = JSON.parse(userData);
                            if (user && user.role === 'admin') {
                                totalUsers = 1; // At least the admin user exists
                            }
                        }
                    }
                    
                    console.log('Total users count:', totalUsers); // Debug log
                } catch (error) {
                    console.error('Error getting users count:', error);
                }

                // Update the dashboard UI with the calculated data
                updateDashboardUI(ordersData.orders || [], {
                    totalUsers,
                    totalOrders,
                    totalRevenue
                });

            } catch (error) {
                console.error('Error loading dashboard data:', error);
                showToast('Failed to load dashboard data', 'error');
            }
        }

        // Update this function to handle both orders and stats
        function updateDashboardUI(recentOrders, stats) {
            // Update stats cards
            const totalUsersElement = document.getElementById('total-users');
            const totalOrdersElement = document.getElementById('total-orders');
            const totalRevenueElement = document.getElementById('total-revenue');

            console.log('Updating stats:', stats); // Debug log

            if (totalUsersElement) {
                totalUsersElement.textContent = stats.totalUsers;
                console.log('Updated total users element:', totalUsersElement.textContent); // Debug log
            } else {
                console.error('Total users element not found');
            }

            if (totalOrdersElement) {
                totalOrdersElement.textContent = stats.totalOrders;
            }

            if (totalRevenueElement) {
                totalRevenueElement.textContent = `₹${stats.totalRevenue.toFixed(2)}`;
            }

            // Update recent orders table with real data
            const ordersTableBody = document.getElementById('orders-table-body');
            
            console.log('Updating dashboard with orders:', recentOrders); // Debug log
            
            if (recentOrders && recentOrders.length > 0) {
                const tableContent = recentOrders.map(order => {
                    // Ensure we have valid data for each field
                    const orderId = order._id ? order._id.slice(-6) : 'N/A';
                    const customerName = order.customer ? 
                        `${order.customer.firstName || ''} ${order.customer.lastName || ''}`.trim() || 'N/A' : 'N/A';
                    const orderDate = order.createdAt ? new Date(order.createdAt).toLocaleDateString() : 'N/A';
                    const orderStatus = order.status || 'pending';
                    const orderTotal = order.summary && order.summary.total ? order.summary.total.toFixed(2) : '0.00';
                    
                    return `
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap">#${orderId}</td>
                            <td class="px-6 py-4 whitespace-nowrap">${customerName}</td>
                            <td class="px-6 py-4 whitespace-nowrap">${orderDate}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 text-xs font-semibold rounded-full 
                                    ${orderStatus === 'completed' ? 'bg-green-100 text-green-800' : 
                                    orderStatus === 'pending' ? 'bg-yellow-100 text-yellow-800' : 
                                    'bg-blue-100 text-blue-800'}">
                                    ${orderStatus}
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">₹${orderTotal}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="viewOrderDetails('${order._id || ''}')" 
                                    class="text-indigo-600 hover:text-indigo-900">
                                    View
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
                
                ordersTableBody.innerHTML = tableContent;
                console.log('Table content:', tableContent); // Debug log
            } else {
                ordersTableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                            No recent orders found
                        </td>
                    </tr>
                `;
            }
        }

        // Add this function to view order details
        async function viewOrderDetails(orderId) {
            if (!orderId) {
                showToast('Order ID is missing', 'error');
                return;
            }

            try {
                const response = await fetch(`${BASE_URL}/orders/${orderId}`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch order details');
                }

                const data = await response.json();
                console.log('Order details:', data); // Debug log

                if (!data.success) {
                    throw new Error(data.message || 'Failed to fetch order details');
                }

                const order = data.order;
                
                // Create a modal to display order details
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
                modal.id = 'order-details-modal';
                
                modal.innerHTML = `
                    <div class="bg-white rounded-lg w-11/12 max-w-4xl max-h-90vh overflow-y-auto">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-2xl font-bold text-gray-800">Order Details #${order._id.slice(-6)}</h2>
                                <button onclick="closeOrderModal()" class="text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-lg font-bold text-gray-800 mb-2">Customer Information</h3>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <p><span class="font-medium">Name:</span> ${order.customer.firstName} ${order.customer.lastName}</p>
                                        <p><span class="font-medium">Email:</span> ${order.customer.email}</p>
                                        <p><span class="font-medium">Phone:</span> ${order.customer.phone || 'N/A'}</p>
                                        <p><span class="font-medium">Address:</span> ${order.customer.address}</p>
                                        <p><span class="font-medium">City:</span> ${order.customer.city}</p>
                                        <p><span class="font-medium">State:</span> ${order.customer.state}</p>
                                        <p><span class="font-medium">ZIP Code:</span> ${order.customer.zipCode}</p>
                                        ${order.customer.deliveryInstructions ? `<p><span class="font-medium">Delivery Instructions:</span> ${order.customer.deliveryInstructions}</p>` : ''}
                                    </div>
                                </div>
                                
                                <div>
                                    <h3 class="text-lg font-bold text-gray-800 mb-2">Order Summary</h3>
                                    <div class="bg-gray-50 p-4 rounded-lg">
                                        <p><span class="font-medium">Order Date:</span> ${new Date(order.createdAt).toLocaleString()}</p>
                                        <p><span class="font-medium">Status:</span> 
                                            <span class="px-2 py-1 text-xs font-semibold rounded-full 
                                                ${order.status === 'completed' ? 'bg-green-100 text-green-800' : 
                                                order.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 
                                                'bg-blue-100 text-blue-800'}">
                                                ${order.status || 'pending'}
                                            </span>
                                        </p>
                                        <p><span class="font-medium">Subtotal:</span> ₹${order.summary.subtotal.toFixed(2)}</p>
                                        <p><span class="font-medium">Shipping:</span> ₹${order.summary.shipping.toFixed(2)}</p>
                                        <p><span class="font-medium">Tax:</span> ₹${order.summary.tax.toFixed(2)}</p>
                                        <p class="font-bold text-lg mt-2"><span class="font-medium">Total:</span> ₹${order.summary.total.toFixed(2)}</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-6">
                                <h3 class="text-lg font-bold text-gray-800 mb-2">Order Items</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            ${order.items.map(item => `
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap">${item.name}</td>
                                                    <td class="px-6 py-4 whitespace-nowrap">${item.quantity}</td>
                                                    <td class="px-6 py-4 whitespace-nowrap">₹${item.price.toFixed(2)}</td>
                                                    <td class="px-6 py-4 whitespace-nowrap">₹${(item.price * item.quantity).toFixed(2)}</td>
                                                </tr>
                                            `).join('')}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="mt-6 flex justify-end">
                                <button onclick="closeOrderModal()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            } catch (error) {
                console.error('Error loading order details:', error);
                showToast('Failed to load order details', 'error');
            }
        }

        // Function to close the order details modal
        function closeOrderModal() {
            const modal = document.getElementById('order-details-modal');
            if (modal) {
                modal.remove();
            }
        }

        // Function to update order status
        async function updateOrderStatus(orderId) {
            if (!orderId) {
                toastError('Order ID is missing');
                return;
            }

            // Create a simple status selection modal
            const statusModal = document.createElement('div');
            statusModal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
            statusModal.id = 'status-update-modal';
            
            statusModal.innerHTML = `
                <div class="bg-white rounded-lg w-96">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Update Order Status</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">Select Status</label>
                            <select id="order-status-select" class="w-full p-2 border border-gray-300 rounded">
                                <option value="pending">Pending</option>
                                <option value="processing">Processing</option>
                                <option value="shipped">Shipped</option>
                                <option value="delivered">Delivered</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="flex justify-end">
                            <button onclick="closeStatusModal()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2">
                                Cancel
                            </button>
                            <button onclick="submitStatusUpdate('${orderId}')" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded">
                                Update
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(statusModal);
        }

        // Function to close the status update modal
        function closeStatusModal() {
            const modal = document.getElementById('status-update-modal');
            if (modal) {
                modal.remove();
            }
        }

        // Function to submit the status update
        async function submitStatusUpdate(orderId) {
            const statusSelect = document.getElementById('order-status-select');
            const newStatus = statusSelect.value;
            
            try {
                const response = await fetch(`${BASE_URL}/orders/${orderId}/status`, {
                    method: 'PATCH',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                    body: JSON.stringify({ status: newStatus }),
                });

                if (response.ok) {
                    toastSuccess('Order status updated successfully');
                    closeStatusModal();
                    closeOrderModal();
                    loadDashboardData(); // Refresh the dashboard
                } else {
                    toastError('Failed to update order status');
                }
            } catch (error) {
                console.error('Error updating order status:', error);
                toastError('Error updating order status');
            }
        }

        // Toast notification function
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg text-white font-medium shadow-lg transform transition-all duration-300 ease-in-out z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            toast.textContent = message;
            
            // Add slide-in animation
            toast.style.transform = 'translateX(100%)';
            toast.style.opacity = '0';
            
            document.body.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
                toast.style.opacity = '1';
            }, 10);
            
            // Remove toast after 3 seconds
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                toast.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
    </script>
</body>

</html>